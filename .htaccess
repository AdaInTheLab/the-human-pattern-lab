RewriteEngine On

# Redirect www.thehumanpatternlab.com â†’ thehumanpatternlab.com
RewriteCond %{HTTP_HOST} ^www\.thehumanpatternlab\.com$ [NC]
RewriteRule ^(.*)$ https://thehumanpatternlab.com/$1 [L,R=301]

# Redirect legacy /api/* on the main domain to the API subdomain
RewriteRule ^api/(.*)$ https://api.thehumanpatternlab.com/$1 [R=302,L,NE]

# If the requested file or directory exists, serve it
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Otherwise, always serve index.html
RewriteRule . /index.html [L]
